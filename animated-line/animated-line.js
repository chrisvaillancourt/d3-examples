import{b as t,a}from"../axis-3a2612fb.js";import"../index-54c9ecd2.js";import{j as e,s as n}from"../precisionRound-f2241ba6.js";import{l as i}from"../line-a0e524d0.js";import{t as r,a as s,d}from"../defaultLocale-6888ceff.js";import"../hour-4cecfcf7.js";import"../month-fdf3866f.js";import{l as o,e as p}from"../linear-3681a81c.js";import{s as l}from"../time-717451d1.js";console.time("draw line"),async function(){let c=await e("../data/nyc_weather_data.json");const h=t=>t.temperatureMax,m=r("%Y-%m-%d"),f=t=>m(t.date);c=c.sort((t,a)=>f(t)-f(a)).slice(0,100);let g={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};g.boundedWidth=g.width-g.margin.left-g.margin.right,g.boundedHeight=g.height-g.margin.top-g.margin.bottom;const u=n("#wrapper").append("svg").attr("width",g.width).attr("height",g.height).append("g").style("transform",`translate(${g.margin.left}px, ${g.margin.top}px)`);u.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",g.boundedWidth).attr("height",g.boundedHeight),u.append("rect").attr("class","freezing"),u.append("g").attr("clip-path","url(#bounds-clip-path)").append("path").attr("class","line"),u.append("path").attr("class","line"),u.append("g").attr("class","x-axis").style("transform",`translateY(${g.boundedHeight}px)`),u.append("g").attr("class","y-axis");const b=e=>{const n=o().domain(p(e,h)).range([g.boundedHeight,0]),r=n(32),s=(u.select(".freezing").attr("x",0).attr("width",g.boundedWidth).attr("y",r).attr("height",g.boundedHeight-r),l().domain(p(e.slice(2),f)).range([0,g.boundedWidth])),d=i().x(t=>s(f(t))).y(t=>n(h(t)));var c=e.slice(-2),m=s(f(c[1]))-s(f(c[0]));u.select(".line").attr("d",d(e)).style("transform",`translateX(${m}px)`).transition().duration(1e3).style("transform","none");const b=t().scale(n),x=(u.select(".y-axis").call(b),a().scale(s));u.select(".x-axis").transition().duration(1e3).call(x)};function x(t){const a=t[t.length-1],e=d.offset(f(a),1);return{date:s("%Y-%m-%d")(e),temperatureMax:h(a)+(6*Math.random()-3)}}b(c),setInterval((function(){c=[...c.slice(1),x(c)],b(c)}),1500)}().then(()=>console.timeEnd("draw line"));
