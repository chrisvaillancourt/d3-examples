import{l as t,e as a,b as e,a as n}from"../linear-01919740.js";import{j as i,s as r}from"../precisionRound-de7a9f9e.js";import{t as s,l as d}from"../line-8011cae4.js";import{t as o,a as l,d as p}from"../defaultLocale-94b85140.js";!async function(){let h=await i("../data/nyc_weather_data.json");const c=t=>t.temperatureMax,g=o("%Y-%m-%d"),m=t=>g(t.date);h=h.sort((t,a)=>m(t)-m(a)).slice(0,100);let u={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};u.boundedWidth=u.width-u.margin.left-u.margin.right,u.boundedHeight=u.height-u.margin.top-u.margin.bottom;const f=r("#wrapper").append("svg").attr("width",u.width).attr("height",u.height).append("g").style("transform",`translate(${u.margin.left}px, ${u.margin.top}px)`);f.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",u.boundedWidth).attr("height",u.boundedHeight),f.append("rect").attr("class","freezing"),f.append("g").attr("clip-path","url(#bounds-clip-path)").append("path").attr("class","line"),f.append("path").attr("class","line"),f.append("g").attr("class","x-axis").style("transform",`translateY(${u.boundedHeight}px)`),f.append("g").attr("class","y-axis");const b=i=>{const r=t().domain(a(i,c)).range([u.boundedHeight,0]),o=r(32),l=(f.select(".freezing").attr("x",0).attr("width",u.boundedWidth).attr("y",o).attr("height",u.boundedHeight-o),s().domain(a(i.slice(2),m)).range([0,u.boundedWidth])),p=d().x(t=>l(m(t))).y(t=>r(c(t)));var h=i.slice(-2),g=l(m(h[1]))-l(m(h[0]));f.select(".line").attr("d",p(i)).style("transform",`translateX(${g}px)`).transition().duration(1e3).style("transform","none");const b=e().scale(r),x=(f.select(".y-axis").call(b),n().scale(l));f.select(".x-axis").transition().duration(1e3).call(x)};function x(t){const a=t[t.length-1],e=p.offset(m(a),1);return{date:l("%Y-%m-%d")(e),temperatureMax:c(a)+(6*Math.random()-3)}}b(h),setInterval((function(){h=[...h.slice(1),x(h)],b(h)}),1500)}();
