import{l as t,e as a,b as e,a as n}from"../linear-da77f7f9.js";import{j as i,s as r}from"../precisionRound-28517a2b.js";import{t as s,l as d}from"../line-30a73215.js";import{t as o,a as l,d as p}from"../defaultLocale-94b85140.js";!async function(){let h=await i("../data/nyc_weather_data.json");const c=t=>t.temperatureMax,g=o("%Y-%m-%d"),m=t=>g(t.date);h=h.sort((t,a)=>m(t)-m(a)).slice(0,100);let f={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};f.boundedWidth=f.width-f.margin.left-f.margin.right,f.boundedHeight=f.height-f.margin.top-f.margin.bottom;const u=r("#wrapper").append("svg").attr("width",f.width).attr("height",f.height).append("g").style("transform",`translate(${f.margin.left}px, ${f.margin.top}px)`);u.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",f.boundedWidth).attr("height",f.boundedHeight),u.append("rect").attr("class","freezing"),u.append("g").attr("clip-path","url(#bounds-clip-path)").append("path").attr("class","line"),u.append("path").attr("class","line"),u.append("g").attr("class","x-axis").style("transform",`translateY(${f.boundedHeight}px)`),u.append("g").attr("class","y-axis");const b=i=>{const r=t().domain(a(i,c)).range([f.boundedHeight,0]),o=r(32),l=(u.select(".freezing").attr("x",0).attr("width",f.boundedWidth).attr("y",o).attr("height",f.boundedHeight-o),s().domain(a(i.slice(2),m)).range([0,f.boundedWidth])),p=d().x(t=>l(m(t))).y(t=>r(c(t)));var h=i.slice(-2),g=l(m(h[1]))-l(m(h[0]));u.select(".line").attr("d",p(i)).style("transform",`translateX(${g}px)`).transition().duration(1e3).style("transform","none");const b=e().scale(r),x=(u.select(".y-axis").call(b),n().scale(l));u.select(".x-axis").transition().duration(1e3).call(x)};function x(t){const a=t[t.length-1],e=p.offset(m(a),1);return{date:l("%Y-%m-%d")(e),temperatureMax:c(a)+(6*Math.random()-3)}}b(h),setInterval((function(){h=[...h.slice(1),x(h)],b(h)}),1500)}();
