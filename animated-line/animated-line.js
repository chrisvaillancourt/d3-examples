import{j as t,s as a,l as e,e as n,b as i,a as r}from"../linear-313f5fbe.js";import{t as s,a as d,d as o,b as l,l as p}from"../line-c88d8767.js";!async function(){let h=await t("../data/nyc_weather_data.json");const c=t=>t.temperatureMax,g=s("%Y-%m-%d"),m=t=>g(t.date);h=h.sort((t,a)=>m(t)-m(a)).slice(0,100);let u={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};u.boundedWidth=u.width-u.margin.left-u.margin.right,u.boundedHeight=u.height-u.margin.top-u.margin.bottom;const f=a("#wrapper").append("svg").attr("width",u.width).attr("height",u.height).append("g").style("transform",`translate(${u.margin.left}px, ${u.margin.top}px)`);f.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",u.boundedWidth).attr("height",u.boundedHeight),f.append("rect").attr("class","freezing"),f.append("g").attr("clip-path","url(#bounds-clip-path)").append("path").attr("class","line"),f.append("path").attr("class","line"),f.append("g").attr("class","x-axis").style("transform",`translateY(${u.boundedHeight}px)`),f.append("g").attr("class","y-axis");const b=t=>{const a=e().domain(n(t,c)).range([u.boundedHeight,0]),s=a(32),d=(f.select(".freezing").attr("x",0).attr("width",u.boundedWidth).attr("y",s).attr("height",u.boundedHeight-s),l().domain(n(t.slice(2),m)).range([0,u.boundedWidth])),o=p().x(t=>d(m(t))).y(t=>a(c(t)));var h=t.slice(-2),g=d(m(h[1]))-d(m(h[0]));f.select(".line").attr("d",o(t)).style("transform",`translateX(${g}px)`).transition().duration(1e3).style("transform","none");const b=i().scale(a),x=(f.select(".y-axis").call(b),r().scale(d));f.select(".x-axis").transition().duration(1e3).call(x)};function x(t){const a=t[t.length-1],e=o.offset(m(a),1);return{date:d("%Y-%m-%d")(e),temperatureMax:c(a)+(6*Math.random()-3)}}b(h),setInterval((function(){h=[...h.slice(1),x(h)],b(h)}),1500)}();
