import{a as t}from"../axis-3a2612fb.js";import{j as e,s as a,g as n}from"../precisionRound-200bdab7.js";import{l as s,e as i}from"../linear-a2cf98e2.js";import{h as r,c as o}from"../createDimensions-03e199fd.js";import{m as l}from"../max-fec1de3e.js";console.time("render histogram"),async function(){const c=await e("../data/nyc_weather_data.json"),d=window.innerWidth<600?window.innerWidth:600;var m=o({customDimensions:{width:d,height:.6*d,margin:{top:30,right:10,bottom:50,left:50}}});const p=a("#wrapper").append("svg").attr("width",m.width).attr("height",m.height).append("g").style("transform",`translate(${m.margin.left}px, ${m.margin.top}px)`);p.append("g").attr("class","bins"),p.append("line").attr("class","mean"),p.append("g").attr("class","x-axis").style("transform",`translateY(${m.boundedHeight}px)`).append("text").attr("class","x-axis-label");const x=t=>t.humidity,h=t=>t.length,g=s().domain(i(c,x)).range([0,m.boundedWidth]).nice(),f=r().domain(g.domain()).value(x).thresholds(12)(c),u=s().domain([0,l(f,h)]).range([m.boundedHeight,0]).nice();let b=p.select(".bins").selectAll(".bin").data(f);b.exit().remove();const y=b.enter().append("g").attr("class","bin");y.append("rect"),y.append("text"),b=y.merge(b),b.select("rect").attr("x",t=>g(t.x0)+1).attr("y",t=>u(h(t))).attr("height",t=>m.boundedHeight-u(h(t))).attr("width",t=>l([0,g(t.x1)-g(t.x0)-1]));const w=function(t,e){let a=0,n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++a,n+=e);else{let s=-1;for(let i of t)null!=(i=e(i,++s,t))&&(i=+i)>=i&&(++a,n+=i)}if(a)return n/a}(c,x),j=(p.selectAll(".mean").attr("x1",g(w)).attr("x2",g(w)).attr("y1",-20).attr("y2",m.boundedHeight),t().scale(g));p.select(".x-axis").call(j).select(".x-axis-label").attr("x",m.boundedWidth/2).attr("y",m.margin.bottom-10).text("Humidity");var v=a("#tooltip");const H=n(".2f");b.select("rect").on("mouseenter",(function(t){v.select("#count").text(h(t)),v.select("#range").text([H(t.x0),H(t.x1)].join("-"));const e=g(t.x0)+(g(t.x1)-g(t.x0))/2+m.margin.left,a=u(h(t))+m.margin.top;v.style("transform",`translate(calc(-50% + ${e}px), calc(-100% + ${a}px))`).style("opacity",1)})).on("mouseleave",(function(){v.style("opacity",0)}))}().then((function(){console.timeEnd("render histogram")})).catch(console.error);
