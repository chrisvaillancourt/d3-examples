import{t,c as e,e as n,l as a,a as r}from"../linear-da77f7f9.js";import{m as i}from"../max-4f4ac469.js";import{j as o,s,t as l}from"../precisionRound-28517a2b.js";function c(t){return null===t?NaN:+t}var u=Array.prototype.slice;function h(t){return function(){return t}}function d(t){return t}function f(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function p(){var a=d,r=n,i=f;function o(n){var o,s,l=n.length,c=new Array(l);for(o=0;o<l;++o)c[o]=a(n[o],o,n);var u=r(c),h=u[0],d=u[1],f=i(c,h,d);Array.isArray(f)||(f=t(h,d,f),f=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(r);++a<r;)i[a]=t+a*n;return i}(Math.ceil(h/f)*f,d,f));for(var p=f.length;f[0]<=h;)f.shift(),--p;for(;f[p-1]>d;)f.pop(),--p;var g,m=new Array(p+1);for(o=0;o<=p;++o)(g=m[o]=[]).x0=o>0?f[o-1]:h,g.x1=o<p?f[o]:d;for(o=0;o<l;++o)h<=(s=c[o])&&s<=d&&m[e(f,s,0,p)].push(n[o]);return m}return o.value=function(t){return arguments.length?(a="function"==typeof t?t:h(t),o):a},o.domain=function(t){return arguments.length?(r="function"==typeof t?t:h([t[0],t[1]]),o):r},o.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?h(u.call(t)):h(t),o):i},o}!async function(){const t=await o("../data/nyc_weather_data.json");let e={width:600,height:360,margin:{top:30,right:10,bottom:50,left:50}};e.boundedWidth=e.width-e.margin.left-e.margin.right,e.boundedHeight=e.height-e.margin.top-e.margin.bottom;const u=s("#wrapper").append("svg").attr("width",e.width).attr("height",e.height).append("g").style("transform",`translate(${e.margin.left}px, ${e.margin.top}px)`);u.append("g").attr("class","bins"),u.append("line").attr("class","mean"),u.append("g").attr("class","x-axis").style("transform",`translateY(${e.boundedHeight}px)`).append("text").attr("class","x-axis-label");const h=t=>t.humidity,d=t=>t.length,f=a().domain(n(t,h)).range([0,e.boundedWidth]).nice(),g=p().domain(f.domain()).value(h).thresholds(12)(t),m=a().domain([0,i(g,d)]).range([e.boundedHeight,0]).nice();let x=u.select(".bins").selectAll(".bin").data(g);x.exit().remove();const y=x.enter().append("g").attr("class","bin");y.append("rect"),y.append("text"),x=y.merge(x),x.select("rect").attr("x",t=>f(t.x0)+1).attr("y",t=>m(d(t))).attr("height",t=>e.boundedHeight-m(d(t))).attr("width",t=>i([0,f(t.x1)-f(t.x0)-1]));const b=function(t,e){var n,a=t.length,r=a,i=-1,o=0;if(null==e)for(;++i<a;)isNaN(n=c(t[i]))?--r:o+=n;else for(;++i<a;)isNaN(n=c(e(t[i],i,t)))?--r:o+=n;if(r)return o/r}(t,h),v=(u.selectAll(".mean").attr("x1",f(b)).attr("x2",f(b)).attr("y1",-20).attr("y2",e.boundedHeight),r().scale(f));u.select(".x-axis").call(v).select(".x-axis-label").attr("x",e.boundedWidth/2).attr("y",e.margin.bottom-10).text("Humidity");var w=s("#tooltip");const A=l(".2f");x.select("rect").on("mouseenter",(function(t){w.select("#count").text(d(t)),w.select("#range").text([A(t.x0),A(t.x1)].join("-"));const n=f(t.x0)+(f(t.x1)-f(t.x0))/2+e.margin.left,a=m(d(t))+e.margin.top;w.style("transform",`translate(calc(-50% + ${n}px), calc(-100% + ${a}px))`).style("opacity",1)})).on("mouseleave",(function(){w.style("opacity",0)}))}();
