import{c as t,a as e}from"../bisect-ada9d806.js";import{t as n,e as a,l as r}from"../linear-bf5f1e59.js";import{m as i}from"../max-4f4ac469.js";import{s as o,g as s}from"../precisionRound-37c4ad23.js";import{j as l}from"../json-3227c80e.js";function c(t){return null===t?NaN:+t}var d=Array.prototype.slice;function u(t){return function(){return t}}function f(t){return t}function h(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function p(){var e=f,r=a,i=h;function o(a){var o,s,l=a.length,c=new Array(l);for(o=0;o<l;++o)c[o]=e(a[o],o,a);var d=r(c),u=d[0],f=d[1],h=i(c,u,f);Array.isArray(h)||(h=n(u,f,h),h=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(r);++a<r;)i[a]=t+a*n;return i}(Math.ceil(u/h)*h,f,h));for(var p=h.length;h[0]<=u;)h.shift(),--p;for(;h[p-1]>f;)h.pop(),--p;var g,m=new Array(p+1);for(o=0;o<=p;++o)(g=m[o]=[]).x0=o>0?h[o-1]:u,g.x1=o<p?h[o]:f;for(o=0;o<l;++o)u<=(s=c[o])&&s<=f&&m[t(h,s,0,p)].push(a[o]);return m}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:u(t),o):e},o.domain=function(t){return arguments.length?(r="function"==typeof t?t:u([t[0],t[1]]),o):r},o.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?u(d.call(t)):u(t),o):i},o}!async function(){const t=await l("../data/nyc_weather_data.json");let n={width:600,height:360,margin:{top:30,right:10,bottom:50,left:50}};n.boundedWidth=n.width-n.margin.left-n.margin.right,n.boundedHeight=n.height-n.margin.top-n.margin.bottom;const d=o("#wrapper").append("svg").attr("width",n.width).attr("height",n.height).append("g").style("transform",`translate(${n.margin.left}px, ${n.margin.top}px)`);d.append("g").attr("class","bins"),d.append("line").attr("class","mean"),d.append("g").attr("class","x-axis").style("transform",`translateY(${n.boundedHeight}px)`).append("text").attr("class","x-axis-label");const u=t=>t.humidity,f=t=>t.length,h=r().domain(a(t,u)).range([0,n.boundedWidth]).nice(),g=p().domain(h.domain()).value(u).thresholds(12)(t),m=r().domain([0,i(g,f)]).range([n.boundedHeight,0]).nice();let x=d.select(".bins").selectAll(".bin").data(g);x.exit().remove();const y=x.enter().append("g").attr("class","bin");y.append("rect"),y.append("text"),x=y.merge(x),x.select("rect").attr("x",t=>h(t.x0)+1).attr("y",t=>m(f(t))).attr("height",t=>n.boundedHeight-m(f(t))).attr("width",t=>i([0,h(t.x1)-h(t.x0)-1]));const b=function(t,e){var n,a=t.length,r=a,i=-1,o=0;if(null==e)for(;++i<a;)isNaN(n=c(t[i]))?--r:o+=n;else for(;++i<a;)isNaN(n=c(e(t[i],i,t)))?--r:o+=n;if(r)return o/r}(t,u),v=(d.selectAll(".mean").attr("x1",h(b)).attr("x2",h(b)).attr("y1",-20).attr("y2",n.boundedHeight),e().scale(h));d.select(".x-axis").call(v).select(".x-axis-label").attr("x",n.boundedWidth/2).attr("y",n.margin.bottom-10).text("Humidity");var w=o("#tooltip");const A=s(".2f");x.select("rect").on("mouseenter",(function(t){w.select("#count").text(f(t)),w.select("#range").text([A(t.x0),A(t.x1)].join("-"));const e=h(t.x0)+(h(t.x1)-h(t.x0))/2+n.margin.left,a=m(f(t))+n.margin.top;w.style("transform",`translate(calc(-50% + ${e}px), calc(-100% + ${a}px))`).style("opacity",1)})).on("mouseleave",(function(){w.style("opacity",0)}))}();
