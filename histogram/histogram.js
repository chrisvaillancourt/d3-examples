import{t,b as e,e as n,l as a}from"../linear-c4626420.js";import{m as r}from"../max-4f4ac469.js";import{a as i}from"../axis-3a2612fb.js";import"../index-96966b36.js";import{j as o,s,g as l}from"../precisionRound-f61f2560.js";function c(t){return null===t?NaN:+t}var u=Array.prototype.slice;function f(t){return function(){return t}}function h(t){return t}function d(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function p(){var a=h,r=n,i=d;function o(n){var o,s,l=n.length,c=new Array(l);for(o=0;o<l;++o)c[o]=a(n[o],o,n);var u=r(c),f=u[0],h=u[1],d=i(c,f,h);Array.isArray(d)||(d=t(f,h,d),d=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(r);++a<r;)i[a]=t+a*n;return i}(Math.ceil(f/d)*d,h,d));for(var p=d.length;d[0]<=f;)d.shift(),--p;for(;d[p-1]>h;)d.pop(),--p;var g,m=new Array(p+1);for(o=0;o<=p;++o)(g=m[o]=[]).x0=o>0?d[o-1]:f,g.x1=o<p?d[o]:h;for(o=0;o<l;++o)f<=(s=c[o])&&s<=h&&m[e(d,s,0,p)].push(n[o]);return m}return o.value=function(t){return arguments.length?(a="function"==typeof t?t:f(t),o):a},o.domain=function(t){return arguments.length?(r="function"==typeof t?t:f([t[0],t[1]]),o):r},o.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?f(u.call(t)):f(t),o):i},o}!async function(){const t=await o("../data/nyc_weather_data.json");let e={width:600,height:360,margin:{top:30,right:10,bottom:50,left:50}};e.boundedWidth=e.width-e.margin.left-e.margin.right,e.boundedHeight=e.height-e.margin.top-e.margin.bottom;const u=s("#wrapper").append("svg").attr("width",e.width).attr("height",e.height).append("g").style("transform",`translate(${e.margin.left}px, ${e.margin.top}px)`);u.append("g").attr("class","bins"),u.append("line").attr("class","mean"),u.append("g").attr("class","x-axis").style("transform",`translateY(${e.boundedHeight}px)`).append("text").attr("class","x-axis-label");const f=t=>t.humidity,h=t=>t.length,d=a().domain(n(t,f)).range([0,e.boundedWidth]).nice(),g=p().domain(d.domain()).value(f).thresholds(12)(t),m=a().domain([0,r(g,h)]).range([e.boundedHeight,0]).nice();let x=u.select(".bins").selectAll(".bin").data(g);x.exit().remove();const y=x.enter().append("g").attr("class","bin");y.append("rect"),y.append("text"),x=y.merge(x),x.select("rect").attr("x",t=>d(t.x0)+1).attr("y",t=>m(h(t))).attr("height",t=>e.boundedHeight-m(h(t))).attr("width",t=>r([0,d(t.x1)-d(t.x0)-1]));const b=function(t,e){var n,a=t.length,r=a,i=-1,o=0;if(null==e)for(;++i<a;)isNaN(n=c(t[i]))?--r:o+=n;else for(;++i<a;)isNaN(n=c(e(t[i],i,t)))?--r:o+=n;if(r)return o/r}(t,f),v=(u.selectAll(".mean").attr("x1",d(b)).attr("x2",d(b)).attr("y1",-20).attr("y2",e.boundedHeight),i().scale(d));u.select(".x-axis").call(v).select(".x-axis-label").attr("x",e.boundedWidth/2).attr("y",e.margin.bottom-10).text("Humidity");var w=s("#tooltip");const A=l(".2f");x.select("rect").on("mouseenter",(function(t){w.select("#count").text(h(t)),w.select("#range").text([A(t.x0),A(t.x1)].join("-"));const n=d(t.x0)+(d(t.x1)-d(t.x0))/2+e.margin.left,a=m(h(t))+e.margin.top;w.style("transform",`translate(calc(-50% + ${n}px), calc(-100% + ${a}px))`).style("opacity",1)})).on("mouseleave",(function(){w.style("opacity",0)}))}();
