import{t,b as e,e as n,l as a}from"../linear-0c710ebb.js";import{m as r}from"../max-4f4ac469.js";import{a as i}from"../axis-3a2612fb.js";import"../index-b9fbf715.js";import{j as o,s,g as l}from"../precisionRound-200bdab7.js";function c(t){return null===t?NaN:+t}var u=Array.prototype.slice;function d(t){return function(){return t}}function f(t){return t}function h(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function p(){var a=f,r=n,i=h;function o(n){var o,s,l=n.length,c=new Array(l);for(o=0;o<l;++o)c[o]=a(n[o],o,n);var u=r(c),d=u[0],f=u[1],h=i(c,d,f);Array.isArray(h)||(h=t(d,f,h),h=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var a=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(r);++a<r;)i[a]=t+a*n;return i}(Math.ceil(d/h)*h,f,h));for(var p=h.length;h[0]<=d;)h.shift(),--p;for(;h[p-1]>f;)h.pop(),--p;var g,m=new Array(p+1);for(o=0;o<=p;++o)(g=m[o]=[]).x0=o>0?h[o-1]:d,g.x1=o<p?h[o]:f;for(o=0;o<l;++o)d<=(s=c[o])&&s<=f&&m[e(h,s,0,p)].push(n[o]);return m}return o.value=function(t){return arguments.length?(a="function"==typeof t?t:d(t),o):a},o.domain=function(t){return arguments.length?(r="function"==typeof t?t:d([t[0],t[1]]),o):r},o.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?d(u.call(t)):d(t),o):i},o}!async function(){const t=await o("../data/nyc_weather_data.json");let e={width:600,height:360,margin:{top:30,right:10,bottom:50,left:50}};e.boundedWidth=e.width-e.margin.left-e.margin.right,e.boundedHeight=e.height-e.margin.top-e.margin.bottom;const u=s("#wrapper").append("svg").attr("width",e.width).attr("height",e.height).append("g").style("transform",`translate(${e.margin.left}px, ${e.margin.top}px)`);u.append("g").attr("class","bins"),u.append("line").attr("class","mean"),u.append("g").attr("class","x-axis").style("transform",`translateY(${e.boundedHeight}px)`).append("text").attr("class","x-axis-label");const d=t=>t.humidity,f=t=>t.length,h=a().domain(n(t,d)).range([0,e.boundedWidth]).nice(),g=p().domain(h.domain()).value(d).thresholds(12)(t),m=a().domain([0,r(g,f)]).range([e.boundedHeight,0]).nice();let x=u.select(".bins").selectAll(".bin").data(g);x.exit().remove();const y=x.enter().append("g").attr("class","bin");y.append("rect"),y.append("text"),x=y.merge(x),x.select("rect").attr("x",t=>h(t.x0)+1).attr("y",t=>m(f(t))).attr("height",t=>e.boundedHeight-m(f(t))).attr("width",t=>r([0,h(t.x1)-h(t.x0)-1]));const b=function(t,e){var n,a=t.length,r=a,i=-1,o=0;if(null==e)for(;++i<a;)isNaN(n=c(t[i]))?--r:o+=n;else for(;++i<a;)isNaN(n=c(e(t[i],i,t)))?--r:o+=n;if(r)return o/r}(t,d),v=(u.selectAll(".mean").attr("x1",h(b)).attr("x2",h(b)).attr("y1",-20).attr("y2",e.boundedHeight),i().scale(h));u.select(".x-axis").call(v).select(".x-axis-label").attr("x",e.boundedWidth/2).attr("y",e.margin.bottom-10).text("Humidity");var w=s("#tooltip");const A=l(".2f");x.select("rect").on("mouseenter",(function(t){w.select("#count").text(f(t)),w.select("#range").text([A(t.x0),A(t.x1)].join("-"));const n=h(t.x0)+(h(t.x1)-h(t.x0))/2+e.margin.left,a=m(f(t))+e.margin.top;w.style("transform",`translate(calc(-50% + ${n}px), calc(-100% + ${a}px))`).style("opacity",1)})).on("mouseleave",(function(){w.style("opacity",0)}))}();
