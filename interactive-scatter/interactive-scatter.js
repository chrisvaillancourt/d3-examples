import{l as t,e}from"../linear-c4c66d49.js";import{m as a}from"../min-54383882.js";import{a as n,b as o}from"../axis-3a2612fb.js";import"../index-54c9ecd2.js";import{S as r,v as i,j as l,s,g as d}from"../precisionRound-f2241ba6.js";import{t as c,a as m}from"../defaultLocale-6888ceff.js";import{D as p}from"../delaunay-5be918bc.js";!async function(){const g=await l("../data/nyc_weather_data.json"),h=t=>t.dewPoint,f=t=>t.humidity,u=a([.9*window.innerWidth,.9*window.innerHeight]);let x={width:u,height:u,margin:{top:10,right:10,bottom:50,left:50}};x.boundedWidth=x.width-x.margin.left-x.margin.right,x.boundedHeight=x.height-x.margin.top-x.margin.bottom;const y=s("#wrapper").append("svg").attr("width",x.width).attr("height",x.height).append("g").style("transform",`translate(${x.margin.left}px, ${x.margin.top}px)`),b=t().domain(e(g,h)).range([0,x.boundedWidth]).nice(),w=t().domain(e(g,f)).range([x.boundedHeight,0]).nice();(t=>{const e=y.selectAll("circle").data(t,t=>t[0]);e.enter().append("circle").merge(e).attr("cx",t=>b(h(t))).attr("cy",t=>w(f(t))).attr("r",4),e.exit().remove()})(g);var v=p.from(g,t=>b(h(t)),t=>w(f(t))).voronoi();v.xmax=x.boundedWidth,v.ymax=x.boundedHeight,y.selectAll(".voronoi").data(g).enter().append("path").attr("class","voronoi").attr("d",(function(t,e){return v.renderCell(e)}));const j=n().scale(b),H=(y.append("g").call(j).style("transform",`translateY(${x.boundedHeight}px)`).append("text").attr("class","x-axis-label").attr("x",x.boundedWidth/2).attr("y",x.margin.bottom-10).html("dew point (&deg;F)"),o().scale(w).ticks(4));y.append("g").call(H).append("text").attr("class","y-axis-label").attr("x",-x.boundedHeight/2).attr("y",10-x.margin.left).text("relative humidity");var A=s("#tooltip"),W=d(".2f"),$=d(".2f"),D=c("%Y-%m-%d"),Y=m("%B %A %-d, %Y");y.selectAll(".voronoi").on("mouseenter",(function(t,e){A.select("#humidity").text(W(f(t))),A.select("#dew-point").text($(h(t))),A.select("#date").text(Y(D(t.date)));const a=b(h(t))+x.margin.left,n=w(f(t))+x.margin.top;A.style("transform",`translate(calc(-50% + ${a}px), calc(-100% + ${n}px))`).style("opacity",1);y.append("circle").attr("class","tooltipDot").attr("cx",b(h(t))).attr("cy",w(f(t))).attr("r",7).style("fill","maroon").style("pointer-events","none")})).on("mouseleave",(function(){A.style("opacity",0),(t=".tooltipDot","string"==typeof t?new r([document.querySelectorAll(t)],[document.documentElement]):new r([null==t?[]:t],i)).remove();var t}))}();
