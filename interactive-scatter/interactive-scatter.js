import{l as t,e}from"../linear-0c710ebb.js";import{m as a}from"../min-54383882.js";import{a as n,b as o}from"../axis-3a2612fb.js";import"../index-b9fbf715.js";import{j as i,s as r,g as s}from"../precisionRound-200bdab7.js";import{D as d,s as l}from"../delaunay-7250514f.js";import{a as c,t as m}from"../defaultLocale-c798c300.js";!async function(){const p=await i("../data/nyc_weather_data.json"),g=t=>t.dewPoint,h=t=>t.humidity,f=a([.9*window.innerWidth,.9*window.innerHeight]);let x={width:f,height:f,margin:{top:10,right:10,bottom:50,left:50}};x.boundedWidth=x.width-x.margin.left-x.margin.right,x.boundedHeight=x.height-x.margin.top-x.margin.bottom;const b=r("#wrapper").append("svg").attr("width",x.width).attr("height",x.height).append("g").style("transform",`translate(${x.margin.left}px, ${x.margin.top}px)`),u=t().domain(e(p,g)).range([0,x.boundedWidth]).nice(),y=t().domain(e(p,h)).range([x.boundedHeight,0]).nice();(t=>{const e=b.selectAll("circle").data(t,t=>t[0]);e.enter().append("circle").merge(e).attr("cx",t=>u(g(t))).attr("cy",t=>y(h(t))).attr("r",4),e.exit().remove()})(p);var w=d.from(p,t=>u(g(t)),t=>y(h(t))).voronoi();w.xmax=x.boundedWidth,w.ymax=x.boundedHeight,b.selectAll(".voronoi").data(p).enter().append("path").attr("class","voronoi").attr("d",(function(t,e){return w.renderCell(e)}));const v=n().scale(u),j=(b.append("g").call(v).style("transform",`translateY(${x.boundedHeight}px)`).append("text").attr("class","x-axis-label").attr("x",x.boundedWidth/2).attr("y",x.margin.bottom-10).html("dew point (&deg;F)"),o().scale(y).ticks(4));b.append("g").call(j).append("text").attr("class","y-axis-label").attr("x",-x.boundedHeight/2).attr("y",10-x.margin.left).text("relative humidity");var H=r("#tooltip"),W=s(".2f"),$=s(".2f"),A=c("%Y-%m-%d"),D=m("%B %A %-d, %Y");b.selectAll(".voronoi").on("mouseenter",(function(t,e){H.select("#humidity").text(W(h(t))),H.select("#dew-point").text($(g(t))),H.select("#date").text(D(A(t.date)));const a=u(g(t))+x.margin.left,n=y(h(t))+x.margin.top;H.style("transform",`translate(calc(-50% + ${a}px), calc(-100% + ${n}px))`).style("opacity",1);b.append("circle").attr("class","tooltipDot").attr("cx",u(g(t))).attr("cy",y(h(t))).attr("r",7).style("fill","maroon").style("pointer-events","none")})).on("mouseleave",(function(){H.style("opacity",0),l(".tooltipDot").remove()}))}();
