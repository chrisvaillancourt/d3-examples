import{d as t,e,b as a,a as n}from"../bisect-ada9d806.js";import{i as r,c as i,a as o,m as s,b as c,t as l,l as d,e as u}from"../linear-bf5f1e59.js";import{m as p}from"../max-4f4ac469.js";import{h,s as f,g as m}from"../precisionRound-37c4ad23.js";import{m as g,s as b,a as v,h as y,b as w,l as x}from"../line-7e971be0.js";import{j}from"../json-3227c80e.js";import{t as H,d as M,s as D,y as T,a as W}from"../defaultLocale-1a6cbc98.js";function Y(){for(var t,e=h;t=e.sourceEvent;)e=t;return e}function S(t){return new Date(t)}function $(t){return t instanceof Date?+t:+new Date(+t)}function k(t,a,n,r,d,u,p,h,f){var m=i(o,o),g=m.invert,b=m.domain,v=f(".%L"),y=f(":%S"),w=f("%I:%M"),x=f("%I %p"),j=f("%a %d"),H=f("%b %d"),M=f("%B"),D=f("%Y"),T=[[p,1,1e3],[p,5,5e3],[p,15,15e3],[p,30,3e4],[u,1,6e4],[u,5,3e5],[u,15,9e5],[u,30,18e5],[d,1,36e5],[d,3,108e5],[d,6,216e5],[d,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[a,1,2592e6],[a,3,7776e6],[t,1,31536e6]];function W(e){return(p(e)<e?v:u(e)<e?y:d(e)<e?w:r(e)<e?x:a(e)<e?n(e)<e?j:H:t(e)<e?M:D)(e)}function Y(a,n,r,i){if(null==a&&(a=10),"number"==typeof a){var o=Math.abs(r-n)/a,s=e((function(t){return t[2]})).right(T,o);s===T.length?(i=l(n/31536e6,r/31536e6,a),a=t):s?(i=(s=T[o/T[s-1][2]<T[s][2]/o?s-1:s])[1],a=s[0]):(i=Math.max(l(n,r,a),1),a=h)}return null==i?a:a.every(i)}return m.invert=function(t){return new Date(g(t))},m.domain=function(t){return arguments.length?b(s.call(t,$)):b().map(S)},m.ticks=function(t,e){var a,n=b(),r=n[0],i=n[n.length-1],o=i<r;return o&&(a=r,r=i,i=a),a=(a=Y(t,r,i,e))?a.range(r,i+1):[],o?a.reverse():a},m.tickFormat=function(t,e){return null==e?W:f(e)},m.nice=function(t,e){var a=b();return(t=Y(t,a[0],a[a.length-1],e))?b(function(t,e){var a,n=0,r=(t=t.slice()).length-1,i=t[n],o=t[r];return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}(a,t)):m},m.copy=function(){return c(m,k(t,a,n,r,d,u,p,h,f))},m}!async function(){let e=await j("../data/nyc_weather_data.json");const i=t=>t.temperatureMax,o=W("%Y-%m-%d"),s=t=>o(t.date);e=e.sort((t,e)=>s(t)-s(e)).slice(0,100);let c={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};c.boundedWidth=c.width-c.margin.left-c.margin.right,c.boundedHeight=c.height-c.margin.top-c.margin.bottom;const l=f("#wrapper").append("svg").attr("width",c.width).attr("height",c.height).append("g").attr("transform",`translate(${c.margin.left}, ${c.margin.top})`);l.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",c.boundedWidth).attr("height",c.boundedHeight);const h=l.append("g").attr("clip-path","url(#bounds-clip-path)"),S=d().domain(u(e,i)).range([c.boundedHeight,0]),$=S(32),B=(h.append("rect").attr("class","freezing").attr("x",0).attr("width",p([0,c.boundedWidth])).attr("y",$).attr("height",p([0,c.boundedHeight-$])),function(){return r.apply(k(T,w,D,M,y,v,b,g,H).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain(u(e,s)).range([0,c.boundedWidth])),F=x().x(t=>B(s(t))).y(t=>S(i(t))),G=(h.append("path").attr("class","line").attr("d",F(e)),a().scale(S)),L=(l.append("g").attr("class","y-axis").call(G).append("text").attr("class","y-axis-label").attr("x",-c.boundedHeight/2).attr("y",10-c.margin.left).html("Minimum Temperature (&deg;F)"),n().scale(B));l.append("g").attr("class","x-axis").style("transform",`translateY(${c.boundedHeight}px)`).call(L),l.append("rect").attr("class","listening-rect").attr("width",c.boundedWidth).attr("height",c.boundedHeight).on("mousemove",(function(){var a=function(t){var e=Y();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var a=t.ownerSVGElement||t;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}(t,e)}(this),n=B.invert(a[0]),r=function(e,a){if(n=e.length){var n,r,i=0,o=0,s=e[o];for(null==a&&(a=t);++i<n;)(a(r=e[i],s)<0||0!==a(s,s))&&(s=r,o=i);return 0===a(s,s)?o:void 0}}(e,(function(t,e){return f(t)-f(e)})),o=e[r],l=s(o),d=i(o);V.select("#date").text(P(l)),V.select("#temperature").html((u=d,m(".1f")(u)+"Â°F"));var u;var p=B(l)+c.margin.left,h=S(d)+c.margin.top;function f(t){return Math.abs(s(t)-n)}V.style("transform",`translate(calc(-50% + ${p}px), calc(-100% + ${h}px))`).style("opacity",1),C.attr("cx",B(l)).attr("cy",S(d)).attr("opacity",1)})).on("mouseleave",(function(){V.style("opacity",0),C.style("opacity",1)}));var P=H("%B %A %-d, %Y"),V=f("#tooltip"),C=l.append("circle").attr("r",4).attr("stroke","#af9358").attr("fill","white").attr("stroke-width",2).style("opacity",0)}();
