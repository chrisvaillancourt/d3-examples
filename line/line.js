import{a as t,i as e,c as a,d as n,m as r,f as i,g as o,t as s,l as c,e as l}from"../linear-8e38f363.js";import{m as d}from"../max-4f4ac469.js";import{b as u,a as p}from"../axis-3a2612fb.js";import{h,s as f,g as m}from"../precisionRound-37c4ad23.js";import{m as g,s as b,a as v,h as y,b as w,l as x}from"../line-7e971be0.js";import{j}from"../json-3227c80e.js";import{t as H,d as M,s as D,y as T,a as W}from"../defaultLocale-1a6cbc98.js";function Y(){for(var t,e=h;t=e.sourceEvent;)e=t;return e}function S(t){return new Date(t)}function $(t){return t instanceof Date?+t:+new Date(+t)}function k(t,e,c,l,d,u,p,h,f){var m=a(n,n),g=m.invert,b=m.domain,v=f(".%L"),y=f(":%S"),w=f("%I:%M"),x=f("%I %p"),j=f("%a %d"),H=f("%b %d"),M=f("%B"),D=f("%Y"),T=[[p,1,1e3],[p,5,5e3],[p,15,15e3],[p,30,3e4],[u,1,6e4],[u,5,3e5],[u,15,9e5],[u,30,18e5],[d,1,36e5],[d,3,108e5],[d,6,216e5],[d,12,432e5],[l,1,864e5],[l,2,1728e5],[c,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function W(a){return(p(a)<a?v:u(a)<a?y:d(a)<a?w:l(a)<a?x:e(a)<a?c(a)<a?j:H:t(a)<a?M:D)(a)}function Y(e,a,n,r){if(null==e&&(e=10),"number"==typeof e){var i=Math.abs(n-a)/e,c=o((function(t){return t[2]})).right(T,i);c===T.length?(r=s(a/31536e6,n/31536e6,e),e=t):c?(r=(c=T[i/T[c-1][2]<T[c][2]/i?c-1:c])[1],e=c[0]):(r=Math.max(s(a,n,e),1),e=h)}return null==r?e:e.every(r)}return m.invert=function(t){return new Date(g(t))},m.domain=function(t){return arguments.length?b(r.call(t,$)):b().map(S)},m.ticks=function(t,e){var a,n=b(),r=n[0],i=n[n.length-1],o=i<r;return o&&(a=r,r=i,i=a),a=(a=Y(t,r,i,e))?a.range(r,i+1):[],o?a.reverse():a},m.tickFormat=function(t,e){return null==e?W:f(e)},m.nice=function(t,e){var a=b();return(t=Y(t,a[0],a[a.length-1],e))?b(function(t,e){var a,n=0,r=(t=t.slice()).length-1,i=t[n],o=t[r];return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}(a,t)):m},m.copy=function(){return i(m,k(t,e,c,l,d,u,p,h,f))},m}!async function(){let a=await j("../data/nyc_weather_data.json");const n=t=>t.temperatureMax,r=W("%Y-%m-%d"),i=t=>r(t.date);a=a.sort((t,e)=>i(t)-i(e)).slice(0,100);let o={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};o.boundedWidth=o.width-o.margin.left-o.margin.right,o.boundedHeight=o.height-o.margin.top-o.margin.bottom;const s=f("#wrapper").append("svg").attr("width",o.width).attr("height",o.height).append("g").attr("transform",`translate(${o.margin.left}, ${o.margin.top})`);s.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",o.boundedWidth).attr("height",o.boundedHeight);const h=s.append("g").attr("clip-path","url(#bounds-clip-path)"),S=c().domain(l(a,n)).range([o.boundedHeight,0]),$=S(32),B=(h.append("rect").attr("class","freezing").attr("x",0).attr("width",d([0,o.boundedWidth])).attr("y",$).attr("height",d([0,o.boundedHeight-$])),function(){return e.apply(k(T,w,D,M,y,v,b,g,H).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain(l(a,i)).range([0,o.boundedWidth])),F=x().x(t=>B(i(t))).y(t=>S(n(t))),G=(h.append("path").attr("class","line").attr("d",F(a)),u().scale(S)),L=(s.append("g").attr("class","y-axis").call(G).append("text").attr("class","y-axis-label").attr("x",-o.boundedHeight/2).attr("y",10-o.margin.left).html("Minimum Temperature (&deg;F)"),p().scale(B));s.append("g").attr("class","x-axis").style("transform",`translateY(${o.boundedHeight}px)`).call(L),s.append("rect").attr("class","listening-rect").attr("width",o.boundedWidth).attr("height",o.boundedHeight).on("mousemove",(function(){var e=function(t){var e=Y();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var a=t.ownerSVGElement||t;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}(t,e)}(this),r=B.invert(e[0]),s=function(e,a){if(n=e.length){var n,r,i=0,o=0,s=e[o];for(null==a&&(a=t);++i<n;)(a(r=e[i],s)<0||0!==a(s,s))&&(s=r,o=i);return 0===a(s,s)?o:void 0}}(a,(function(t,e){return f(t)-f(e)})),c=a[s],l=i(c),d=n(c);V.select("#date").text(P(l)),V.select("#temperature").html((u=d,m(".1f")(u)+"Â°F"));var u;var p=B(l)+o.margin.left,h=S(d)+o.margin.top;function f(t){return Math.abs(i(t)-r)}V.style("transform",`translate(calc(-50% + ${p}px), calc(-100% + ${h}px))`).style("opacity",1),C.attr("cx",B(l)).attr("cy",S(d)).attr("opacity",1)})).on("mouseleave",(function(){V.style("opacity",0),C.style("opacity",1)}));var P=H("%B %A %-d, %Y"),V=f("#tooltip"),C=s.append("circle").attr("r",4).attr("stroke","#af9358").attr("fill","white").attr("stroke-width",2).style("opacity",0)}();
