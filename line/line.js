import{a as t,i as e,c as a,b as n,m as r,d as i,f as o,t as s,l,e as d}from"../linear-78edb2bb.js";import{b as u,a as c}from"../axis-3a2612fb.js";import"../index-b9fbf715.js";import{j as p,s as h,g as f}from"../precisionRound-200bdab7.js";import{m}from"../mouse-2982b87d.js";import{l as g}from"../line-a0e524d0.js";import{t as b,d as y,s as v,y as w,a as x}from"../defaultLocale-443e777c.js";import{m as j,s as H,a as D,h as M}from"../hour-e996d043.js";import{m as W}from"../month-49a81042.js";function $(t,e){var a,n,r=t.length,i=-1;if(null==e){for(;++i<r;)if(null!=(a=t[i])&&a>=a)for(n=a;++i<r;)null!=(a=t[i])&&a>n&&(n=a)}else for(;++i<r;)if(null!=(a=e(t[i],i,t))&&a>=a)for(n=a;++i<r;)null!=(a=e(t[i],i,t))&&a>n&&(n=a);return n}function k(t){return new Date(t)}function Y(t){return t instanceof Date?+t:+new Date(+t)}function F(t,e,l,d,u,c,p,h,f){var m=a(n,n),g=m.invert,b=m.domain,y=f(".%L"),v=f(":%S"),w=f("%I:%M"),x=f("%I %p"),j=f("%a %d"),H=f("%b %d"),D=f("%B"),M=f("%Y"),W=[[p,1,1e3],[p,5,5e3],[p,15,15e3],[p,30,3e4],[c,1,6e4],[c,5,3e5],[c,15,9e5],[c,30,18e5],[u,1,36e5],[u,3,108e5],[u,6,216e5],[u,12,432e5],[d,1,864e5],[d,2,1728e5],[l,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function $(a){return(p(a)<a?y:c(a)<a?v:u(a)<a?w:d(a)<a?x:e(a)<a?l(a)<a?j:H:t(a)<a?D:M)(a)}function B(e,a,n,r){if(null==e&&(e=10),"number"==typeof e){var i=Math.abs(n-a)/e,l=o((function(t){return t[2]})).right(W,i);l===W.length?(r=s(a/31536e6,n/31536e6,e),e=t):l?(r=(l=W[i/W[l-1][2]<W[l][2]/i?l-1:l])[1],e=l[0]):(r=Math.max(s(a,n,e),1),e=h)}return null==r?e:e.every(r)}return m.invert=function(t){return new Date(g(t))},m.domain=function(t){return arguments.length?b(r.call(t,Y)):b().map(k)},m.ticks=function(t,e){var a,n=b(),r=n[0],i=n[n.length-1],o=i<r;return o&&(a=r,r=i,i=a),a=(a=B(t,r,i,e))?a.range(r,i+1):[],o?a.reverse():a},m.tickFormat=function(t,e){return null==e?$:f(e)},m.nice=function(t,e){var a=b();return(t=B(t,a[0],a[a.length-1],e))?b(function(t,e){var a,n=0,r=(t=t.slice()).length-1,i=t[n],o=t[r];return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}(a,t)):m},m.copy=function(){return i(m,F(t,e,l,d,u,c,p,h,f))},m}!async function(){let a=await p("../data/nyc_weather_data.json");const n=t=>t.temperatureMax,r=x("%Y-%m-%d"),i=t=>r(t.date);a=a.sort((t,e)=>i(t)-i(e)).slice(0,100);let o={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};o.boundedWidth=o.width-o.margin.left-o.margin.right,o.boundedHeight=o.height-o.margin.top-o.margin.bottom;const s=h("#wrapper").append("svg").attr("width",o.width).attr("height",o.height).append("g").attr("transform",`translate(${o.margin.left}, ${o.margin.top})`);s.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",o.boundedWidth).attr("height",o.boundedHeight);const k=s.append("g").attr("clip-path","url(#bounds-clip-path)"),Y=l().domain(d(a,n)).range([o.boundedHeight,0]),B=Y(32),I=(k.append("rect").attr("class","freezing").attr("x",0).attr("width",$([0,o.boundedWidth])).attr("y",B).attr("height",$([0,o.boundedHeight-B])),function(){return e.apply(F(w,W,v,y,M,D,H,j,b).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain(d(a,i)).range([0,o.boundedWidth])),L=g().x(t=>I(i(t))).y(t=>Y(n(t))),_=(k.append("path").attr("class","line").attr("d",L(a)),u().scale(Y)),z=(s.append("g").attr("class","y-axis").call(_).append("text").attr("class","y-axis-label").attr("x",-o.boundedHeight/2).attr("y",10-o.margin.left).html("Minimum Temperature (&deg;F)"),c().scale(I));s.append("g").attr("class","x-axis").style("transform",`translateY(${o.boundedHeight}px)`).call(z),s.append("rect").attr("class","listening-rect").attr("width",o.boundedWidth).attr("height",o.boundedHeight).on("mousemove",(function(){var e=m(this),r=I.invert(e[0]),s=function(e,a){if(n=e.length){var n,r,i=0,o=0,s=e[o];for(null==a&&(a=t);++i<n;)(a(r=e[i],s)<0||0!==a(s,s))&&(s=r,o=i);return 0===a(s,s)?o:void 0}}(a,(function(t,e){return g(t)-g(e)})),l=a[s],d=i(l),u=n(l);P.select("#date").text(A(d)),P.select("#temperature").html((c=u,f(".1f")(c)+"Â°F"));var c;var p=I(d)+o.margin.left,h=Y(u)+o.margin.top;function g(t){return Math.abs(i(t)-r)}P.style("transform",`translate(calc(-50% + ${p}px), calc(-100% + ${h}px))`).style("opacity",1),R.attr("cx",I(d)).attr("cy",Y(u)).attr("opacity",1)})).on("mouseleave",(function(){P.style("opacity",0),R.style("opacity",1)}));var A=b("%B %A %-d, %Y"),P=h("#tooltip"),R=s.append("circle").attr("r",4).attr("stroke","#af9358").attr("fill","white").attr("stroke-width",2).style("opacity",0)}();
