import{h as t,k as e,j as a,s as n,l as r,e as i,b as o,a as l,n as d}from"../linear-313f5fbe.js";import{t as s,b as c,l as p,a as h}from"../line-c88d8767.js";function u(t,e){var a,n,r=t.length,i=-1;if(null==e){for(;++i<r;)if(null!=(a=t[i])&&a>=a)for(n=a;++i<r;)null!=(a=t[i])&&a>n&&(n=a)}else for(;++i<r;)if(null!=(a=e(t[i],i,t))&&a>=a)for(n=a;++i<r;)null!=(a=e(t[i],i,t))&&a>n&&(n=a);return n}function g(){for(var t,a=e;t=a.sourceEvent;)a=t;return a}!async function(){let e=await a("../data/nyc_weather_data.json");const f=t=>t.temperatureMax,m=s("%Y-%m-%d"),b=t=>m(t.date);e=e.sort((t,e)=>b(t)-b(e)).slice(0,100);let y={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};y.boundedWidth=y.width-y.margin.left-y.margin.right,y.boundedHeight=y.height-y.margin.top-y.margin.bottom;const v=n("#wrapper").append("svg").attr("width",y.width).attr("height",y.height).append("g").attr("transform",`translate(${y.margin.left}, ${y.margin.top})`);v.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",y.boundedWidth).attr("height",y.boundedHeight);const x=v.append("g").attr("clip-path","url(#bounds-clip-path)"),w=r().domain(i(e,f)).range([y.boundedHeight,0]),H=w(32),T=(x.append("rect").attr("class","freezing").attr("x",0).attr("width",u([0,y.boundedWidth])).attr("y",H).attr("height",u([0,y.boundedHeight-H])),c().domain(i(e,b)).range([0,y.boundedWidth])),W=p().x(t=>T(b(t))).y(t=>w(f(t))),Y=(x.append("path").attr("class","line").attr("d",W(e)),o().scale(w)),$=(v.append("g").attr("class","y-axis").call(Y).append("text").attr("class","y-axis-label").attr("x",-y.boundedHeight/2).attr("y",10-y.margin.left).html("Minimum Temperature (&deg;F)"),l().scale(T));v.append("g").attr("class","x-axis").style("transform",`translateY(${y.boundedHeight}px)`).call($),v.append("rect").attr("class","listening-rect").attr("width",y.boundedWidth).attr("height",y.boundedHeight).on("mousemove",(function(){var a=function(t){var e=g();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var a=t.ownerSVGElement||t;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}(t,e)}(this),n=T.invert(a[0]),r=function(e,a){if(n=e.length){var n,r,i=0,o=0,l=e[o];for(null==a&&(a=t);++i<n;)(a(r=e[i],l)<0||0!==a(l,l))&&(l=r,o=i);return 0===a(l,l)?o:void 0}}(e,(function(t,e){return h(t)-h(e)})),i=e[r],o=b(i),l=f(i);M.select("#date").text(j(o)),M.select("#temperature").html((s=l,d(".1f")(s)+"Â°F"));var s;var c=T(o)+y.margin.left,p=w(l)+y.margin.top;function h(t){return Math.abs(b(t)-n)}M.style("transform",`translate(calc(-50% + ${c}px), calc(-100% + ${p}px))`).style("opacity",1),S.attr("cx",T(o)).attr("cy",w(l)).attr("opacity",1)})).on("mouseleave",(function(){M.style("opacity",0),S.style("opacity",1)}));var j=h("%B %A %-d, %Y"),M=n("#tooltip"),S=v.append("circle").attr("r",4).attr("stroke","#af9358").attr("fill","white").attr("stroke-width",2).style("opacity",0)}();
