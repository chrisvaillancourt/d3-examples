import{n as t,o as a,j as e,s as r,l as n,e as i,b as o,a as s,f as d}from"../linear-93e29e1f.js";import{m as l}from"../max-b1cdc987.js";import{t as c,l as p}from"../line-3a07f255.js";import{t as h,a as u}from"../defaultLocale-94b85140.js";function g(){for(var t,e=a;t=e.sourceEvent;)e=t;return e}!async function(){let a=await e("../data/nyc_weather_data.json");const m=t=>t.temperatureMax,f=h("%Y-%m-%d"),b=t=>f(t.date);a=a.sort((t,a)=>b(t)-b(a)).slice(0,100);let y={width:.9*window.innerWidth,height:400,margin:{top:15,right:15,bottom:40,left:60}};y.boundedWidth=y.width-y.margin.left-y.margin.right,y.boundedHeight=y.height-y.margin.top-y.margin.bottom;const x=r("#wrapper").append("svg").attr("width",y.width).attr("height",y.height).append("g").attr("transform",`translate(${y.margin.left}, ${y.margin.top})`);x.append("defs").append("clipPath").attr("id","bounds-clip-path").append("rect").attr("width",y.boundedWidth).attr("height",y.boundedHeight);const v=x.append("g").attr("clip-path","url(#bounds-clip-path)"),w=n().domain(i(a,m)).range([y.boundedHeight,0]),H=w(32),j=(v.append("rect").attr("class","freezing").attr("x",0).attr("width",l([0,y.boundedWidth])).attr("y",H).attr("height",l([0,y.boundedHeight-H])),c().domain(i(a,b)).range([0,y.boundedWidth])),T=p().x(t=>j(b(t))).y(t=>w(m(t))),W=(v.append("path").attr("class","line").attr("d",T(a)),o().scale(w)),Y=(x.append("g").attr("class","y-axis").call(W).append("text").attr("class","y-axis-label").attr("x",-y.boundedHeight/2).attr("y",10-y.margin.left).html("Minimum Temperature (&deg;F)"),s().scale(j));x.append("g").attr("class","x-axis").style("transform",`translateY(${y.boundedHeight}px)`).call(Y),x.append("rect").attr("class","listening-rect").attr("width",y.boundedWidth).attr("height",y.boundedHeight).on("mousemove",(function(){var e=function(t){var a=g();return a.changedTouches&&(a=a.changedTouches[0]),function(t,a){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=a.clientX,r.y=a.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var n=t.getBoundingClientRect();return[a.clientX-n.left-t.clientLeft,a.clientY-n.top-t.clientTop]}(t,a)}(this),r=j.invert(e[0]),n=function(a,e){if(r=a.length){var r,n,i=0,o=0,s=a[o];for(null==e&&(e=t);++i<r;)(e(n=a[i],s)<0||0!==e(s,s))&&(s=n,o=i);return 0===e(s,s)?o:void 0}}(a,(function(t,a){return h(t)-h(a)})),i=a[n],o=b(i),s=m(i);M.select("#date").text($(o)),M.select("#temperature").html((l=s,d(".1f")(l)+"Â°F"));var l;var c=j(o)+y.margin.left,p=w(s)+y.margin.top;function h(t){return Math.abs(b(t)-r)}M.style("transform",`translate(calc(-50% + ${c}px), calc(-100% + ${p}px))`).style("opacity",1),S.attr("cx",j(o)).attr("cy",w(s)).attr("opacity",1)})).on("mouseleave",(function(){M.style("opacity",0),S.style("opacity",1)}));var $=u("%B %A %-d, %Y"),M=r("#tooltip"),S=x.append("circle").attr("r",4).attr("stroke","#af9358").attr("fill","white").attr("stroke-width",2).style("opacity",0)}();
